#!/usr/bin/env php
<?php
/**
 * Parse a JSON object and return a JSON object 
 *
 * Used to test that fromJSON and toJSON do work correctly
 * 
 * @author Robbie Hott
 * @license http://opensource.org/licenses/BSD-3-Clause BSD 3-Clause
 * @copyright 2015 the Rector and Visitors of the University of Virginia, and
 *            the Regents of the University of California
 */

// Include the global autoloader generated by composer
include "../vendor/autoload.php";
use \Monolog\Logger;
use \Monolog\Handler\StreamHandler;

// Set up the global log stream
$log = new StreamHandler(\snac\Config::$LOG_DIR . \snac\Config::$SERVER_LOGFILE, Logger::DEBUG);


// If no file was parsed, then print the output that something went wrong
if ($argc < 2) {
    echo "No files given\n\n"
        . "Sample usage: ./parse_json_to_php filename.json\n\n";

} else {

    $id = new \snac\data\Constellation();
    $id->fromJSON(file_get_contents($argv[1]));

    echo $id->toJSON(false);
}
